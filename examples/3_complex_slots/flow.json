{
    "settings": {
        "start_state": "root"
    },
    "states": {
        "root": {
            "description": "Main menu for card management.",
            "response_template": "Welcome! How can I help with your card today? (Lost/Stolen, Freeze, or Rewards)",
            "fallback_behavior": "ask_reclassify",
            "transitions": [
                {
                    "intent": "report_lost_stolen",
                    "target": "lost_stolen_flow"
                },
                {
                    "intent": "check_rewards",
                    "target": "rewards_faq"
                }
            ]
        },
        "rewards_faq": {
            "response_template": "You earn 2 points for groceries, 1 point elsewhere.",
            "transitions": [
                {
                    "intent": "back_to_menu",
                    "target": "root"
                }
            ]
        },
        "lost_stolen_flow": {
            "description": "User is reporting a lost or stolen card. We need the card type and the last known location.",
            "slots_required": [
                "card_type",
                "location"
            ],
            "response_template": "I'm sorry to hear that. To help you, I need to know which card it was (e.g., Gold, Platinum) and where you last had it.",
            "transitions": [
                {
                    "intent": "provide_info",
                    "target": "lost_stolen_confirm",
                    "condition": "all_slots_filled"
                },
                {
                    "intent": "update_info",
                    "target": "lost_stolen_flow"
                }
            ]
        },
        "lost_stolen_confirm": {
            "description": "Confirming details. If the user corrects a detail here, the slots will update and they can confirm again.",
            "response_template": "I have it down as a {card_type} card lost at {location}. Is this correct? You can also tell me if I got something wrong.",
            "transitions": [
                {
                    "intent": "affirmation",
                    "target": "process_report"
                },
                {
                    "intent": "negation",
                    "target": "lost_stolen_flow"
                },
                {
                    "intent": "update_info",
                    "target": "lost_stolen_confirm"
                }
            ]
        },
        "process_report": {
            "type": "action",
            "action_name": "report_lost_stolen_action",
            "on_success": "report_complete",
            "on_error": "system_error"
        },
        "report_complete": {
            "response_template": "Thank you. Your card has been blocked and a replacement is on the way!",
            "transitions": [
                {
                    "intent": "ok",
                    "target": "root"
                }
            ]
        },
        "system_error": {
            "response_template": "I'm sorry, I'm having trouble processing your request. Please call customer support.",
            "transitions": [
                {
                    "intent": "ok",
                    "target": "root"
                }
            ]
        }
    }
}